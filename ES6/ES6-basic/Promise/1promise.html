<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>promise</title>
</head>
<body>
    <script>    
        // ES6中的promise对象, 可以将异步操作以同步的流程表达出来，很好地解决了回调地狱
        // ES6的Promise是一个构造函数, 用来生成promise实例

        // promise对象的三个状态：
        // 1.pending                - 初始化状态
        // 2.fullfilled / resolved  - 成功状态
        // 3.rejected               - 失败状态

        // 使用promise的基本步骤
        // - 创建promise对象
        // - 用promise的回调函数then()

        //  函数名    参数     方法体
        // var fn = (a,b) => {
        //     console.log('箭头函数方法体内有多句语句，需要在方法体外加上{}括号');
        //     return a+b;
        // }
        // console.log(fn(3,4));

        // let promise = new Promise((resolve,reject) => {
        //     console.log('1');

        // })





        // 基本用法
        // ES6 规定，Promise对象是一个构造函数，用来生成Promise实例

        // Promise构造函数接受一个函数作为参数 => 该函数的两个参数分别是resolve和reject两个函数
        // resolve函数作用:将Promise对象的状态从“未完成”变为“成功”   pending -> resolved
        // reject函数的作用:将Promise对象的状态从“未完成”变为“失败”  pending -> rejected

        const promise = new Promise(function(resolve,reject){
            //...some code
            if(/* 异步操作成功 */){
                // 在异步操作成功时调用，并将异步操作的结果，作为参数传递出去；
                resolve(value);
            }else{
                // 在异步操作失败时调用，并将异步操作报出的错误，作为参数传递出去。
                reject(error);
            }
        })

        // Promise实例生成以后，用then方法分别指定resolved状态和rejected状态的回调函数

        // then方法可以接受两个回调函数作为参数:
        // 第一个回调函数是Promise对象的状态变为resolved时调用
        // 第二个回调函数是Promise对象的状态变为rejected时调用 => 第二个函数是可选的，不一定要提供

        // 这两个函数都接受Promise对象传出的值作为参数
        promise.then(function(value){
            // success
        },function(){
            // failure
        })





    </script>
</body>
</html>